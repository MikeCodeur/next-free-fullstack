# GÃ©rer authentification avec Next-Auth

### ğŸ’¡ GÃ©rer authentification

## ğŸ“ Tes notes

Detaille ce que tu as appris ici,Â surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

### Introduction Ã  NextAuth.js

L'authentification est une partie essentielle de toute application web moderne. **NextAuth.js** est une solution **d'authentification complÃ¨te et flexible** pour **Next.js**, qui permet d'ajouter rapidement des fonctionnalitÃ©s de connexion Ã  une application, sans avoir Ã  gÃ©rer manuellement les sessions et la sÃ©curitÃ© des tokens.

Avec **NextAuth.js**, tu peux intÃ©grer diffÃ©rents **fournisseurs d'authentification** comme :

âœ… **Google, GitHub, Twitter, Discord** (OAuth)

âœ… **Email/password avec Magic Link**

âœ… **Authentification par identifiants classiques (credentials)**

âœ… **JWT et sessions sÃ©curisÃ©es**

Dans ce module, nous allons voir **comment configurer NextAuth.js**, gÃ©rer les sessions, et protÃ©ger certaines pages de ton application **Next.js**

ğŸ“‘ Le liens vers la doc [https://authjs.dev/](https://authjs.dev/)

## Exercice

Pour gagner du temps nous avons suivi le `get-started` et les fichiers `auth.ts` et `auth-config.ts` sont la

[https://authjs.dev/getting-started/installation?framework=next-js](https://authjs.dev/getting-started/installation?framework=next-js)

- De mÃªme que les formulaire sont maintenant connectÃ©s au `server action`

Dans cet exercice tu vas devoir appeler les fonctions `sign-in` `sign-up` dans le server action

- Mais dans un premier temps tu vas devoir configurer `next-auth` avec le `provider Credentials`

```tsx
providers: [
    CredentialsProvider({
      name: 'Credentials',

      async authorize(credentials) {

        if (!credentials?.email || !credentials?.password) {
          return null
        }

        const user = await getUserByEmail(credentials.email as string)
        console.log('authorize getUserByEmail', user)

        if (!user) {
          return null
        }

        // Dans un environnement de production, vous devriez comparer avec un mot de passe hashÃ©
        if (credentials.password !== user.password) {
          return null
        }
        console.log('authorize password ok', user)

        return {
          id: user.id,
          email: user.email,
          name: user.name,
          role: user.role,
        }
      },
    }),
  ],
```

Fichiers

- `lib/auth-config.ts`
- `(auth)/actions.ts`

## Bonus

### 1. ğŸš€ GÃ©nÃ©rer le Root Node

PlutÃ´t que dâ€™avoir le nÅ“ud `root` dans le code HTML, voyez si vous pouvez crÃ©er celui-ci en utilisant Ã©galement JavaScript.

Fichiers

- `exercise/about/page`

### 2. ğŸš€ Bonus 2

2PlutÃ´t que dâ€™avoir le nÅ“ud `root` dans le code HTML, voyez si vous pouvez crÃ©er celui-ci en utilisant Ã©galement JavaScript.

Fichiers

- `exercise/about/page`

## Aller plus loin

ğŸ“‘ Le lien vers la doc [https://www.w3schools.com/html/html_css.asp](https://www.w3schools.com/html/html_css.asp)

## Ils vont tâ€™aider

- **ğŸ¶ Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **ğŸ¤– Ash le Robot** : _Ash le Robot te donnera du code utile._
- **ğŸš€ Julia La roquette** : _Julia te donnera des dÃ©fis supplÃ©mentaires._
- **â›ï¸ Hulk le Marteau** : _Quand du code Ã  supprimer est prÃ©sent_
- **ğŸ‘¨â€âœˆï¸ Hugo le chef de projet** : _Va t'aider sur les spÃ©cifications du projet_
