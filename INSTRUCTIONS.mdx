# Server Action

### 💡 Comprendre les server Actionb

## 📝 Tes notes

Détaille ce que tu as appris ici, sur une page [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Les **`Server Actions`** sont une fonctionnalité puissante de `Next.js` qui permet d'exécuter du code côté serveur directement depuis un composant `React`, sans passer par une `API` externe. Contrairement aux `API Routes` traditionnelles, elles simplifient la gestion des actions serveur comme l'accès à une base de données, l'authentification ou l'envoi d'e-mails, tout en optimisant les performances grâce à l'exécution côté backend.

Dans ce module, nous allons découvrir comment utiliser efficacement les `Server Actions` pour traiter des requêtes côté serveur, interagir avec une base de données et améliorer l'expérience utilisateur en réduisant le code nécessaire côté client.

Exemple 

```tsx
// app/actions.ts
"use server";

import { db } from "@/lib/db"; // Supposons que db soit une instance de ta base de données

export async function addUser(name: string, email: string) {
  await db.user.create({
    data: { name, email },
  });
}
```

```tsx
"use client";

import { useState } from "react";
import { addUser } from "@/app/actions";

export default function UserForm() {
  const [name, setName] = useState("");
  const [email, setEmail] = useState("");

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    await addUser(name, email);
    alert("Utilisateur ajouté !");
  };

  return (
    <form onSubmit={handleSubmit}>
      <input value={name} onChange={(e) => setName(e.target.value)} placeholder="Nom" />
      <input value={email} onChange={(e) => setEmail(e.target.value)} placeholder="Email" />
      <button type="submit">Ajouter</button>
    </form>
  );
}
```

📑 Le lien vers la doc [https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations)

## Exercice

Implémente le formulaire et le server action qui appelle la base de données.

- Pense à vérifier les données en entrée.
- Pense à fournir un code retour.

Fichiers

- `/app/server-action/page`

## Aller plus loin

📑 Le lien vers la doc [https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations)

## Ils vont t’aider

- **🐶  Mowgli le Chien** : *Mowgli te guidera dans chaque exercice.*
- **🤖  Ash le Robot** : *Ash le Robot te donnera du code utile.*
- **🚀 Julia La roquette** : *Julia te donnera des défis supplémentaires.*
- **⛏️ Hulk le Marteau** : *Quand du code à supprimer est présent*
- **👨‍✈️ Hugo le chef de projet** : *Va t'aider sur les spécifications du projet*